# Copilot Session Guide

このファイルは、Copilotの別セッションからこのリポジトリにコンテンツを追加する際のガイドです。

## リポジトリの目的

このリポジトリは Infrastructure as Code (IaC) の実践的な概念実装を行うためのものです。
基本的なディレクトリ構造とテンプレートが用意されています。

## 準備完了状態

✅ ディレクトリ構造が作成済み
✅ 各ディレクトリにREADMEとガイドライン配置済み
✅ テンプレートファイル配置済み
✅ .gitignore設定済み
✅ 貢献ガイド（CONTRIBUTING.md）作成済み

## 次のCopilotセッションで実行可能なタスク

### 1. Terraformコードの追加
`terraform/` ディレクトリに以下を追加:
- `providers.tf`: クラウドプロバイダーの設定
- `variables.tf`: 変数定義
- `main.tf`: リソース定義
- `outputs.tf`: 出力定義
- `modules/`: 再利用可能なモジュール

例: AWSでEC2インスタンス、VPC、セキュリティグループを作成

### 2. Ansibleプレイブックの追加
`ansible/` ディレクトリに以下を追加:
- `playbooks/`: 各種プレイブック
- `roles/`: 再利用可能なロール
- `inventory/`: インベントリファイル
- `ansible.cfg`: Ansible設定

例: Webサーバーのセットアップ、アプリケーションデプロイ

### 3. Kubernetesマニフェストの追加
`kubernetes/` ディレクトリに以下を追加:
- Deployment定義
- Service定義
- ConfigMap/Secret
- Ingress設定

例: マイクロサービスアプリケーションのデプロイ設定

### 4. Dockerイメージとコンポーズファイルの追加
`docker/` ディレクトリに以下を追加:
- アプリケーション用Dockerfile
- docker-compose.yml
- マルチステージビルド設定

例: Node.jsアプリケーション、データベース、キャッシュの構成

### 5. 自動化スクリプトの追加
`scripts/` ディレクトリに以下を追加:
- セットアップスクリプト
- デプロイスクリプト
- バックアップスクリプト
- ヘルスチェックスクリプト

### 6. ドキュメントの追加
`docs/` ディレクトリに以下を追加:
- アーキテクチャドキュメント
- セットアップガイド
- デプロイメントガイド
- トラブルシューティング

### 7. サンプル設定の追加
`examples/` ディレクトリに以下を追加:
- シンプルな構成例
- プロダクション環境の例
- 開発環境の例

## 推奨されるアプローチ

1. **具体的なユースケースを選択**: 例えば「3層Webアプリケーション」
2. **段階的に実装**: 
   - まずTerraformでインフラを定義
   - 次にAnsibleで設定を自動化
   - Kubernetesでアプリケーションをデプロイ
   - Dockerでコンテナ化
3. **ドキュメントを忘れずに**: 各ステップを `docs/` に記録

## ベストプラクティス

- ✅ コードはモジュール化して再利用可能に
- ✅ 変数を使用してハードコードを避ける
- ✅ セキュリティを考慮（機密情報はコードに含めない）
- ✅ READMEに使用方法を記載
- ✅ 適切なコメントを追加

## サンプルタスク例

**タスク1: AWS 3層アーキテクチャの実装**
- VPC、サブネット、セキュリティグループ（Terraform）
- EC2インスタンスのセットアップ（Terraform + Ansible）
- アプリケーションデプロイ（Ansible）

**タスク2: Kubernetesマイクロサービスの実装**
- フロントエンド、バックエンド、データベースのDeployment
- Service定義とIngress設定
- ConfigMapとSecretの管理

**タスク3: CI/CDパイプラインの実装**
- GitHub Actions or Jenkins設定
- 自動テストとデプロイスクリプト
- Dockerイメージのビルドとプッシュ

## 質問例

Copilotセッションで以下のような質問/タスクが実行可能:

1. "TerraformでAWS上にVPCと2つのサブネットを作成してください"
2. "Ansibleプレイブックでnginxをインストールして設定してください"
3. "KubernetesでNginxのDeploymentとServiceを作成してください"
4. "Docker ComposeでNode.js + PostgreSQLの環境を作成してください"
5. "デプロイ自動化スクリプトを作成してください"

このリポジトリは完全に準備されており、上記のいずれのタスクでも実行可能です。
